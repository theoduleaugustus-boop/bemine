<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíò Valentine?</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffe0ee;
      --ink:#2b1b22;
      --pink:#ff2f78;
      --pink2:#ff6fa1;
      --card:#ffffffcc;
      --shadow: 0 18px 55px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;color:var(--ink)}
    body{
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 55%),
        radial-gradient(1000px 700px at 80% 20%, #ffeaf2, transparent 60%),
        linear-gradient(135deg, var(--bg1), #fff);
    }

    /* soft floating background hearts */
    #bgHearts{position:fixed;inset:0;pointer-events:none;overflow:hidden;opacity:.30;z-index:0}
    .bg-heart{position:absolute;bottom:-10vh;font-size:18px;animation:floatUp linear infinite;opacity:.9}
    @keyframes floatUp{
      0%{transform:translateY(0) translateX(0) rotate(0deg);opacity:0}
      10%{opacity:.9}
      100%{transform:translateY(-120vh) translateX(20px) rotate(18deg);opacity:0}
    }

    .wrap{position:relative;height:100%;display:flex;align-items:center;justify-content:center;padding:18px;z-index:1}
    .card{
      width:min(600px,94vw);
      background:var(--card);
      border:1px solid rgba(255,255,255,.6);
      border-radius:24px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(12px);
      padding:26px 22px 20px;
      text-align:center;
      position:relative;
    }
    .chip{
      display:inline-flex;align-items:center;gap:10px;
      padding:10px 14px;background:#fff;border-radius:999px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);
      font-weight:900;
    }
    h1{margin:14px 0 8px;font-size:clamp(22px,3.2vw,34px);letter-spacing:-.02em}
    p{margin:0 0 16px;opacity:.85}

    .toast{
      min-height:40px;
      margin:12px 0 22px;
      padding:0 6px;
      position:relative;
      z-index:1;
      font-weight:900;
    }

    .row{
      display:flex;gap:12px;justify-content:center;align-items:center;flex-wrap:wrap;
      position:relative; z-index:2; padding-top:8px;
    }

    button{
      border:0;border-radius:16px;padding:14px 18px;font-size:18px;cursor:pointer;
      transition:transform .15s ease, filter .15s ease, opacity .25s ease;
      user-select:none;-webkit-tap-highlight-color:transparent;
      box-shadow:0 12px 30px rgba(0,0,0,.10);
      min-width:170px;
      font-weight:1000;
    }
    #yesBtn{
      background:linear-gradient(90deg,var(--pink),var(--pink2));
      color:#fff;
      transform-origin:center bottom;
    }
    #noBtn{
      background:#fff;
      border:1px solid rgba(0,0,0,.10);
      color:#222;
      position:relative;
    }
    button:active{transform:scale(.98)}
    .hidden{opacity:0;pointer-events:none}

    /* YES heart beat */
    #yesHeart{
      display:inline-block;margin-left:6px;
      transform-origin:center;
      animation:heartBeat 1.2s ease-in-out infinite;
    }
    @keyframes heartBeat{
      0%,100%{transform:scale(1)}
      50%{transform:scale(1.25)}
    }

    /* No button goes runaway (always clickable) */
    #noBtn.runaway{
      position:fixed;
      z-index:9999;
      pointer-events:auto;
    }

    /* pop-up bubbles for NO text */
    .pop{
      position:fixed;z-index:9998;background:#fff;
      padding:10px 12px;border-radius:14px;
      box-shadow:0 14px 36px rgba(0,0,0,.14);
      font-weight:900;font-size:14px;
      animation:popInOut 1.35s ease forwards;
      pointer-events:none;
      max-width:260px;
    }
    @keyframes popInOut{
      0%{transform:translateY(8px) scale(.95);opacity:0}
      15%{transform:translateY(0) scale(1);opacity:1}
      80%{opacity:1}
      100%{transform:translateY(-10px) scale(.98);opacity:0}
    }

    /* hearts burst on YES */
    .pop-heart{
      position:fixed;font-size:20px;pointer-events:none;
      animation:popUp 1.4s ease-out forwards;
      z-index:9997;
    }
    @keyframes popUp{
      0%{transform:translateY(0) scale(0.8);opacity:0}
      20%{opacity:1}
      100%{transform:translateY(-120px) scale(1.4);opacity:0}
    }

    /* ---- Vinyl Surprise (cartoon-ish) ---- */
    #vinylCase{
      position:fixed;
      z-index:9000;
      width:170px;
      height:130px;
      border-radius:18px;
      background:linear-gradient(135deg,#fff,#ffe6f1);
      border:2px solid rgba(0,0,0,.08);
      box-shadow:0 18px 40px rgba(0,0,0,.18);
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:6px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      transform:rotate(-2deg);
    }
    #vinylCase .label{
      font-weight:1000;
      font-size:14px;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
    }
    #vinylCase .mini{
      font-size:12px;
      opacity:.8;
      font-weight:800;
    }

    /* case ‚Äúopens‚Äù */
    #vinylCase.open{
      width:240px;
      height:150px;
      transform:rotate(0deg);
    }

    /* the ‚Äúrecord‚Äù */
    #record{
      width:76px;height:76px;border-radius:50%;
      background:
        radial-gradient(circle at 50% 50%, #000 0 18%, #222 18% 34%, #111 34% 52%, #000 52% 100%);
      box-shadow: inset 0 0 0 4px rgba(255,255,255,.06);
      position:absolute;
      right:18px;
      top:38px;
      opacity:0;
      transform:translateX(-14px) scale(.95);
      transition:opacity .25s ease, transform .25s ease;
    }
    #record::after{
      content:"";
      position:absolute;inset:30px;
      border-radius:50%;
      background:linear-gradient(90deg,var(--pink),var(--pink2));
      box-shadow:0 0 0 3px rgba(255,255,255,.15);
    }

    #vinylCase.open #record{
      opacity:1;
      transform:translateX(0) scale(1);
    }

    .spin{
      animation:spin 1.2s linear infinite;
    }
    @keyframes spin{
      from{transform:translateX(0) scale(1) rotate(0deg)}
      to{transform:translateX(0) scale(1) rotate(360deg)}
    }

    /* music notes that float forever while playing */
    .note{
      position:fixed;
      z-index:9200;
      font-size:18px;
      pointer-events:none;
      animation:noteFloat 2.2s ease-in forwards;
      opacity:.95;
    }
    @keyframes noteFloat{
      0%{transform:translateY(0) translateX(0) scale(.9);opacity:0}
      15%{opacity:1}
      100%{transform:translateY(-160px) translateX(var(--dx)) scale(1.2);opacity:0}
    }
  </style>
</head>
<body>
  <div id="bgHearts"></div>

  <div class="wrap">
    <div class="card">
      <div class="chip">üíò To the love of my life Sherkima</div>
      <h1>Will you be my Valentine?</h1>
      <p>I‚Äôm asking nicely‚Ä¶ but the buttons might disagree üòå</p>

      <div class="toast" id="toast"></div>

      <div class="row" id="btnRow">
        <button id="yesBtn">YES <span id="yesHeart">üíù</span></button>
        <button id="noBtn">No üôÉ</button>
      </div>
    </div>
  </div>

  <!-- Put your audio file beside this HTML and name it song.m4a -->
  <audio id="audio" preload="auto">
    <source src="song.m4a" type="audio/mp4">
  </audio>

<script>
  // ---------- Background hearts ----------
  const bgHearts = document.getElementById("bgHearts");
  const heartChars = ["üíó","üíñ","üíû","üíï","üíò"];
  function spawnBgHeart(){
    const h = document.createElement("div");
    h.className = "bg-heart";
    h.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
    const left = Math.random()*100;
    const dur = 10 + Math.random()*10;
    const size = 14 + Math.random()*18;
    h.style.left = left + "vw";
    h.style.fontSize = size + "px";
    h.style.animationDuration = dur + "s";
    h.style.animationDelay = (-Math.random()*dur) + "s";
    bgHearts.appendChild(h);
    setTimeout(()=>h.remove(), dur*1000);
  }
  for(let i=0;i<14;i++) spawnBgHeart();
  setInterval(spawnBgHeart, 900);

  // ---------- Main elements ----------
  const toast = document.getElementById("toast");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");
  const yesHeart = document.getElementById("yesHeart");
  const audioEl = document.getElementById("audio");

  // Your NO texts in your exact order:
  const noTexts = [
    "Wrong button üòå",
    "Try again, love.",
    "‚ÄòNO‚Äô is running away maybe try ‚ÄòYES‚Äô?‚Ä¶",
    "You still was able to click no wow I‚Äôm impressed",
    "I think your finger slipped this time. It happens.",
    "Plot twist: No decided to find its own valentine"
  ];

  let noCount = 0;
  const NO_LIMIT = 6;

  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

  function popText(msg){
    const b = document.createElement("div");
    b.className = "pop";
    b.textContent = msg;

    const pad = 16;
    const x = pad + Math.random()*(window.innerWidth - 280);
    const y = pad + Math.random()*(window.innerHeight - 160);

    b.style.left = clamp(x, pad, window.innerWidth - 260) + "px";
    b.style.top  = clamp(y, pad, window.innerHeight - 90) + "px";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(), 1350);
  }

  function moveNo(){
    noBtn.classList.add("runaway");
    const pad = 18;
    const w = noBtn.offsetWidth || 170;
    const h = noBtn.offsetHeight || 56;

    const maxX = window.innerWidth  - w - pad;
    const maxY = window.innerHeight - h - pad;

    const x = pad + Math.random() * clamp(maxX - pad, 40, maxX);
    const y = pad + Math.random() * clamp(maxY - pad, 80, maxY);

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  function growYes(){
    const scale = 1 + (noCount * 0.14);
    yesBtn.style.transform = `scale(${scale})`;
  }

  function speedUpHeart(){
    const duration = Math.max(0.35, 1.2 - (noCount * 0.15)); // 1.2s -> 0.35s
    yesHeart.style.animationDuration = duration + "s";
  }

  function burstHeartsFrom(el){
    const rect = el.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;

    for(let i=0;i<10;i++){
      const h = document.createElement("div");
      h.className = "pop-heart";
      h.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
      const dx = (Math.random()*120 - 60);
      const dy = (Math.random()*30);
      h.style.left = (cx + dx) + "px";
      h.style.top  = (cy + dy) + "px";
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 1400);
    }
  }

  // ---------- NO behavior ----------
  noBtn.addEventListener("click", () => {
    noCount++;

    toast.textContent = noTexts[Math.min(noCount-1, noTexts.length-1)];
    popText(noTexts[Math.min(noCount-1, noTexts.length-1)]);

    growYes();
    speedUpHeart();

    if(noCount >= NO_LIMIT){
      noBtn.classList.add("hidden");
      return;
    }
    moveNo();
  });

  window.addEventListener("resize", () => {
    if(noBtn.classList.contains("runaway") && !noBtn.classList.contains("hidden")){
      moveNo();
    }
  });

  // ---------- YES behavior ----------
  yesBtn.addEventListener("click", () => {
    burstHeartsFrom(yesBtn);
    toast.textContent = "Yessss üòåüíó Smart choice. I knew you were my Valentine.";
    // stop the heart beat once she clicks YES (optional)
    yesHeart.style.animation = "none";
  });

  // ---------- Vinyl surprise ----------
  // Creates a cute ‚Äúcartoon‚Äù vinyl case somewhere random.
  let notesTimer = null;

  function placeVinylCase(){
    const vc = document.createElement("div");
    vc.id = "vinylCase";
    vc.innerHTML = `
      <div class="label">üéÅ Click me for a surprise</div>
      <div class="mini">I promise it‚Äôs cute üòå</div>
      <div id="record" aria-hidden="true"></div>
    `;

    const pad = 18;
    const w = 170, h = 130;
    const x = pad + Math.random()*(window.innerWidth - w - pad*2);
    const y = pad + Math.random()*(window.innerHeight - h - pad*2);

    vc.style.left = clamp(x, pad, window.innerWidth - w - pad) + "px";
    vc.style.top  = clamp(y, pad, window.innerHeight - h - pad) + "px";

    document.body.appendChild(vc);

    const record = vc.querySelector("#record");

    async function startMusic(){
      // iPhone/Safari requires user gesture ‚Äî this click counts.
      try{
        await audioEl.play();
      }catch(e){
        // If it fails, keep UI open but don‚Äôt freeze the page.
      }
    }

    function startNotes(){
      if(notesTimer) return;
      notesTimer = setInterval(() => {
        const note = document.createElement("div");
        note.className = "note";
        note.textContent = ["‚ô™","‚ô´","‚ô¨","‚ô©"][Math.floor(Math.random()*4)];

        const r = vc.getBoundingClientRect();
        const nx = r.left + r.width/2 + (Math.random()*60 - 30);
        const ny = r.top + 30 + (Math.random()*30);
        note.style.left = nx + "px";
        note.style.top  = ny + "px";
        note.style.setProperty("--dx", (Math.random()*100 - 50) + "px");

        document.body.appendChild(note);
        setTimeout(()=>note.remove(), 2200);
      }, 260);
    }

    vc.addEventListener("click", async () => {
      vc.classList.add("open");
      // reveal + spin record
      record.classList.add("spin");
      // start notes and music
      startNotes();
      await startMusic();
      toast.textContent = "Okayyy‚Ä¶ now we‚Äôre vibing üòåüé∂";
    });
  }

  // Spawn it after a short delay so it feels like a ‚Äúsurprise‚Äù
  setTimeout(placeVinylCase, 1200);
</script>
</body>
</html>
